{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[playlistUrl,setPlaylistUrl]=useState('');const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState(null);const[result,setResult]=useState(null);const[isDarkMode,setIsDarkMode]=useState(true);const[user,setUser]=useState(null);useEffect(()=>{document.body.className=isDarkMode?'dark-theme':'light-theme';// Check for callback parameters\nconst params=new URLSearchParams(window.location.search);if(params.has('accessToken')){const userData={accessToken:params.get('accessToken'),refreshToken:params.get('refreshToken'),userId:params.get('userId'),displayName:params.get('displayName')};setUser(userData);// Clean up URL\nwindow.history.replaceState({},document.title,window.location.pathname);}},[isDarkMode]);const handleLogin=async()=>{try{const response=await fetch('http://localhost:4000/login');const data=await response.json();window.location.href=data.url;}catch(error){setError('Failed to initiate Spotify login');}};const handleSubmit=async e=>{e.preventDefault();if(!user){setError('Please login with Spotify first');return;}setIsLoading(true);setError(null);setResult(null);try{if(!playlistUrl.trim()){throw new Error('Please enter a playlist URL');}const response=await fetch('http://localhost:4000/convert',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({url:playlistUrl,accessToken:user.accessToken})});const data=await response.json();if(!response.ok){throw new Error(data.error||'Failed to convert playlist');}setResult(data);}catch(error){console.error('Error:',error);setError(error.message);}finally{setIsLoading(false);}};const toggleTheme=()=>{setIsDarkMode(!isDarkMode);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App \".concat(isDarkMode?'dark-theme':'light-theme'),children:[/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"logo-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"brand\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"brand-text\",children:\"Playlist\"}),/*#__PURE__*/_jsx(\"span\",{className:\"brand-text-len\",children:\"Converter\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"version\",children:\"v3.0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"theme-toggle\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleTheme,className:\"icon-button\",children:isDarkMode?'üåô':'‚òÄÔ∏è'}),!user?/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,className:\"login-button\",children:\"Login with Spotify\"}):/*#__PURE__*/_jsxs(\"span\",{className:\"user-name\",children:[\"Welcome, \",user.displayName]})]})]}),/*#__PURE__*/_jsxs(\"main\",{children:[!user&&/*#__PURE__*/_jsx(\"div\",{className:\"validation-message\",children:\"\\u26A0\\uFE0F Please login with your Spotify account to start converting playlists\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"converter-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:playlistUrl,onChange:e=>setPlaylistUrl(e.target.value),placeholder:\"Enter Spotify playlist URL\",className:\"playlist-input\",disabled:!user}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"convert-button\",disabled:!user||isLoading,children:isLoading?'Converting...':'Convert'})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),result&&/*#__PURE__*/_jsxs(\"div\",{className:\"result-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Conversion Complete!\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Found \",result.songs.length,\" songs\"]}),/*#__PURE__*/_jsxs(\"a\",{href:result.url,className:\"result-link\",target:\"_blank\",rel:\"noopener noreferrer\",children:[\"Open in \",result.platform==='spotify'?'Spotify':'YouTube']}),/*#__PURE__*/_jsx(\"div\",{className:\"songs-list\",children:result.songs.map((song,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"song-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"song-title\",children:song.title}),/*#__PURE__*/_jsx(\"span\",{className:\"song-artist\",children:song.artist})]},index))})]})]})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"footer\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Made with \\u2764\\uFE0F by Abhishek Sharma\"})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","App","playlistUrl","setPlaylistUrl","isLoading","setIsLoading","error","setError","result","setResult","isDarkMode","setIsDarkMode","user","setUser","document","body","className","params","URLSearchParams","window","location","search","has","userData","accessToken","get","refreshToken","userId","displayName","history","replaceState","title","pathname","handleLogin","response","fetch","data","json","href","url","handleSubmit","e","preventDefault","trim","Error","method","headers","JSON","stringify","ok","console","message","toggleTheme","concat","children","onClick","onSubmit","type","value","onChange","target","placeholder","disabled","songs","length","rel","platform","map","song","index","artist"],"sources":["C:/Users/Abhi/CascadeProjects/converter/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\n\nfunction App() {\n  const [playlistUrl, setPlaylistUrl] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [result, setResult] = useState(null);\n  const [isDarkMode, setIsDarkMode] = useState(true);\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    document.body.className = isDarkMode ? 'dark-theme' : 'light-theme';\n    \n    // Check for callback parameters\n    const params = new URLSearchParams(window.location.search);\n    if (params.has('accessToken')) {\n      const userData = {\n        accessToken: params.get('accessToken'),\n        refreshToken: params.get('refreshToken'),\n        userId: params.get('userId'),\n        displayName: params.get('displayName'),\n      };\n      setUser(userData);\n      // Clean up URL\n      window.history.replaceState({}, document.title, window.location.pathname);\n    }\n  }, [isDarkMode]);\n\n  const handleLogin = async () => {\n    try {\n      const response = await fetch('http://localhost:4000/login');\n      const data = await response.json();\n      window.location.href = data.url;\n    } catch (error) {\n      setError('Failed to initiate Spotify login');\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!user) {\n      setError('Please login with Spotify first');\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    setResult(null);\n\n    try {\n      if (!playlistUrl.trim()) {\n        throw new Error('Please enter a playlist URL');\n      }\n\n      const response = await fetch('http://localhost:4000/convert', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ \n          url: playlistUrl,\n          accessToken: user.accessToken\n        }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to convert playlist');\n      }\n\n      setResult(data);\n    } catch (error) {\n      console.error('Error:', error);\n      setError(error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const toggleTheme = () => {\n    setIsDarkMode(!isDarkMode);\n  };\n\n  return (\n    <div className={`App ${isDarkMode ? 'dark-theme' : 'light-theme'}`}>\n      <header className=\"App-header\">\n        <div className=\"logo-container\">\n          <div className=\"brand\">\n            <span className=\"brand-text\">Playlist</span>\n            <span className=\"brand-text-len\">Converter</span>\n          </div>\n          <span className=\"version\">v3.0</span>\n        </div>\n        <div className=\"theme-toggle\">\n          <button onClick={toggleTheme} className=\"icon-button\">\n            {isDarkMode ? 'üåô' : '‚òÄÔ∏è'}\n          </button>\n          {!user ? (\n            <button onClick={handleLogin} className=\"login-button\">\n              Login with Spotify\n            </button>\n          ) : (\n            <span className=\"user-name\">Welcome, {user.displayName}</span>\n          )}\n        </div>\n      </header>\n      <main>\n        {!user && (\n          <div className=\"validation-message\">\n            ‚ö†Ô∏è Please login with your Spotify account to start converting playlists\n          </div>\n        )}\n        <form onSubmit={handleSubmit} className=\"converter-form\">\n          <div className=\"input-group\">\n            <input\n              type=\"text\"\n              value={playlistUrl}\n              onChange={(e) => setPlaylistUrl(e.target.value)}\n              placeholder=\"Enter Spotify playlist URL\"\n              className=\"playlist-input\"\n              disabled={!user}\n            />\n            <button\n              type=\"submit\"\n              className=\"convert-button\"\n              disabled={!user || isLoading}\n            >\n              {isLoading ? 'Converting...' : 'Convert'}\n            </button>\n          </div>\n          {error && <div className=\"error-message\">{error}</div>}\n          {result && (\n            <div className=\"result-container\">\n              <h3>Conversion Complete!</h3>\n              <p>Found {result.songs.length} songs</p>\n              <a href={result.url} \n                 className=\"result-link\" \n                 target=\"_blank\" \n                 rel=\"noopener noreferrer\">\n                Open in {result.platform === 'spotify' ? 'Spotify' : 'YouTube'}\n              </a>\n              \n              <div className=\"songs-list\">\n                {result.songs.map((song, index) => (\n                  <div key={index} className=\"song-item\">\n                    <span className=\"song-title\">{song.title}</span>\n                    <span className=\"song-artist\">{song.artist}</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </form>\n      </main>\n      <footer className=\"footer\">\n        <p>Made with ‚ù§Ô∏è by Abhishek Sharma</p>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}